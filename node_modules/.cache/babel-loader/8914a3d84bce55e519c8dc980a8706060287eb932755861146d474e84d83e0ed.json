{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\Job Mail Folder\\\\url-shortener-affordmed\\\\src\\\\pages\\\\RedirectPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { loadUrls, saveUrls } from '../utils/storage';\nimport { CircularProgress, Stack, Typography } from '@mui/material';\nimport { useLogger } from '../context/LoggerContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RedirectPage() {\n  _s();\n  const {\n    code\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    logEvent\n  } = useLogger();\n  useEffect(() => {\n    const items = loadUrls();\n    const idx = items.findIndex(i => i.code === code);\n    if (idx === -1) {\n      logEvent('redirect_not_found', {\n        code\n      });\n      navigate('/', {\n        replace: true\n      });\n      return;\n    }\n    const it = items[idx];\n    if (Date.now() > it.expiresAt) {\n      logEvent('redirect_expired', {\n        code\n      });\n      navigate('/', {\n        replace: true\n      });\n      return;\n    }\n    it.clicks = (it.clicks || 0) + 1;\n    items[idx] = it;\n    saveUrls(items);\n    logEvent('redirect_success', {\n      code,\n      to: it.longUrl\n    });\n    window.location.replace(it.longUrl);\n  }, [code, navigate, logEvent]);\n  return /*#__PURE__*/_jsxDEV(Stack, {\n    alignItems: \"center\",\n    spacing: 2,\n    children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: \"Redirecting\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n_s(RedirectPage, \"nkVjsfsjyQpU25eK7AIWWq00qJk=\", false, function () {\n  return [useParams, useNavigate, useLogger];\n});\n_c = RedirectPage;\nvar _c;\n$RefreshReg$(_c, \"RedirectPage\");","map":{"version":3,"names":["React","useEffect","useParams","useNavigate","loadUrls","saveUrls","CircularProgress","Stack","Typography","useLogger","jsxDEV","_jsxDEV","RedirectPage","_s","code","navigate","logEvent","items","idx","findIndex","i","replace","it","Date","now","expiresAt","clicks","to","longUrl","window","location","alignItems","spacing","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/Desktop/Job Mail Folder/url-shortener-affordmed/src/pages/RedirectPage.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { loadUrls, saveUrls } from '../utils/storage';\nimport { CircularProgress, Stack, Typography } from '@mui/material';\nimport { useLogger } from '../context/LoggerContext';\n\nexport default function RedirectPage() {\n  const { code } = useParams();\n  const navigate = useNavigate();\n  const { logEvent } = useLogger();\n\n  useEffect(() => {\n    const items = loadUrls();\n    const idx = items.findIndex(i => i.code === code);\n    if (idx === -1) {\n      logEvent('redirect_not_found', { code });\n      navigate('/', { replace: true });\n      return;\n    }\n    const it = items[idx];\n    if (Date.now() > it.expiresAt) {\n      logEvent('redirect_expired', { code });\n      navigate('/', { replace: true });\n      return;\n    }\n    it.clicks = (it.clicks || 0) + 1;\n    items[idx] = it;\n    saveUrls(items);\n    logEvent('redirect_success', { code, to: it.longUrl });\n    window.location.replace(it.longUrl);\n  }, [code, navigate, logEvent]);\n\n  return (\n    <Stack alignItems=\"center\" spacing={2}>\n      <CircularProgress />\n      <Typography>Redirectingâ€¦</Typography>\n    </Stack>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SAASC,QAAQ,EAAEC,QAAQ,QAAQ,kBAAkB;AACrD,SAASC,gBAAgB,EAAEC,KAAK,EAAEC,UAAU,QAAQ,eAAe;AACnE,SAASC,SAAS,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,eAAe,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACrC,MAAM;IAAEC;EAAK,CAAC,GAAGZ,SAAS,CAAC,CAAC;EAC5B,MAAMa,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEa;EAAS,CAAC,GAAGP,SAAS,CAAC,CAAC;EAEhCR,SAAS,CAAC,MAAM;IACd,MAAMgB,KAAK,GAAGb,QAAQ,CAAC,CAAC;IACxB,MAAMc,GAAG,GAAGD,KAAK,CAACE,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACN,IAAI,KAAKA,IAAI,CAAC;IACjD,IAAII,GAAG,KAAK,CAAC,CAAC,EAAE;MACdF,QAAQ,CAAC,oBAAoB,EAAE;QAAEF;MAAK,CAAC,CAAC;MACxCC,QAAQ,CAAC,GAAG,EAAE;QAAEM,OAAO,EAAE;MAAK,CAAC,CAAC;MAChC;IACF;IACA,MAAMC,EAAE,GAAGL,KAAK,CAACC,GAAG,CAAC;IACrB,IAAIK,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGF,EAAE,CAACG,SAAS,EAAE;MAC7BT,QAAQ,CAAC,kBAAkB,EAAE;QAAEF;MAAK,CAAC,CAAC;MACtCC,QAAQ,CAAC,GAAG,EAAE;QAAEM,OAAO,EAAE;MAAK,CAAC,CAAC;MAChC;IACF;IACAC,EAAE,CAACI,MAAM,GAAG,CAACJ,EAAE,CAACI,MAAM,IAAI,CAAC,IAAI,CAAC;IAChCT,KAAK,CAACC,GAAG,CAAC,GAAGI,EAAE;IACfjB,QAAQ,CAACY,KAAK,CAAC;IACfD,QAAQ,CAAC,kBAAkB,EAAE;MAAEF,IAAI;MAAEa,EAAE,EAAEL,EAAE,CAACM;IAAQ,CAAC,CAAC;IACtDC,MAAM,CAACC,QAAQ,CAACT,OAAO,CAACC,EAAE,CAACM,OAAO,CAAC;EACrC,CAAC,EAAE,CAACd,IAAI,EAAEC,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAE9B,oBACEL,OAAA,CAACJ,KAAK;IAACwB,UAAU,EAAC,QAAQ;IAACC,OAAO,EAAE,CAAE;IAAAC,QAAA,gBACpCtB,OAAA,CAACL,gBAAgB;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpB1B,OAAA,CAACH,UAAU;MAAAyB,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAY,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChC,CAAC;AAEZ;AAACxB,EAAA,CAhCuBD,YAAY;EAAA,QACjBV,SAAS,EACTC,WAAW,EACPM,SAAS;AAAA;AAAA6B,EAAA,GAHR1B,YAAY;AAAA,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}